<!DOCTYPE html>
<html>
<head>
	
<!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  	<link rel="stylesheet" href="style.css">
    <title>Categories</title>
    
  </head>
  <body>
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <title>Hello, world!</title>
      <link rel="stylesheet" href="style.css">
  </head>
  <body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#"> 
    <img src="./img/logo7.png"  width="85" height="40" alt="" loading="lazy"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="index.html#cat">Product</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
         Categories
        </a>
        <div id="drop1"class="dropdown-menu" aria-labelledby="navbarDropdown">        
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="cat.html">All categorie</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true"></a>
      </li>
      

    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
     <ul class="navbar-nav mr-auto" style="float: right;">
      <li class="nav-item dropdown" style="float: right;">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
         welcome
        </a>
        <div id="drop1"class="dropdown-menu" aria-labelledby="navbarDropdown">        
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="signin.html" id="signin1">Sign in</a>
          <a class="dropdown-item" id="logout1">Log out</a>
        </div>
      </li>
      <li class="nav-item" >
        <a class="nav-link" href="cart.html">Cart:<span id="counter"></span></a>
      </li>
    </ul>

  </div>
</nav>
<div id="aa"></div>











 <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript">



        if (sessionStorage.getItem("user")!== null){

        $('#navbarDropdown1').text(sessionStorage.getItem("user"))
        $('#signin1').hide();
      }else{
        $('#navbarDropdown1').text('Sign in');
        $('#logout1').hide();
      }
      if(localStorage.getItem('count')===null){
        $('#counter').text(0)
      }else{
        var count=localStorage.getItem('count');
        $('#counter').text(count)
      }




    for(var i=0;i<categorie.length;i++){
      var $a=$('<a class="dropdown-item" href="#">'+categorie[i]+'</a>') ;
      $('#drop1').prepend($a);
  	}
    var display=[]
    if(localStorage.getItem('lien')==='All categorie' || localStorage.getItem('lien')===null ){
      display=categorie;
    }else{
      display.push(localStorage.getItem('lien'))
    }

    for(var i=0;i<display.length;i++){
         var $div=$('<div id="'+categorie[i]+'"class="card-deck" ></div>');

            for(var j=0;j<articles.length;j++){
            	if(display[i]===articles[j]['categorie']){


                var $div1= $('<div class="card" style="margin:10px;"></div>');

                $div1.append('<img  class="card-img-top" src="'+articles[j].url+'" alt="Card image cap">');
                $div1.append('<div class="card-body"><h5 class="card-title">'+articles[j].name+'</h5></div>');
                $div1.append('<div class="card-body"><h5 class="card-title">'+articles[j].brand+'</h5><p class="card-text">'+articles[j].disciption+'</p> </div><div class="card-footer"><small class="text-muted">'+articles[j].price+'$ <small class="text-muted"><button class="addto" id="'+articles[j].id+'"style="float:right">Add To Card</button></small> </div>');
               $div.append($div1);
               $('#aa').append($div);
               }
              }
      }
var count=localStorage.getItem('count')
var list=localStorage.getItem('buy');
if(list===null){
  var array=[];
}else{
var array=list.split(',');
}

$('.addto').click(function(e){ 
var moment=e.target.id;
array.push(moment)
count=Number(count)+1
localStorage.setItem('buy',array);
localStorage.setItem('count',count);
$('#counter').text(count)


});

  $('.dropdown-item').on('click',function(e){
        console.log(e.target.text)
        localStorage.setItem('lien', e.target.text);
        window.open("cat.html","_self")
       })
  $('#logout1').on('click',function(){
       logout();
   });


    </script>
</body>
</html>